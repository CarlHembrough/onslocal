<!DOCTYPE html>
<!--[if lt IE 7]><html class="no-js lt-ie8 lt-ie7" lang="en"><![endif]-->
<!--[if IE 7]><html class="no-js lt-ie8 ie7"  lang="en"><![endif]-->
<!--[if IE 8]><html class="ie8" lang="en"><![endif]-->
<!--[if gt IE 8]><!--><!-->
<html lang="en">
	<!--<![endif]-->
<head>
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"/>
<title>
- Search
- Office for National Statistics</title>
<meta charset="utf-8"/>
<meta content="width=device-width,initial-scale=1.0,user-scalable=1" name="viewport">
<meta content="on" http-equiv="cleartype"/>
<meta name="format-detection" content="telephone=no">
<meta name="theme-color" content="#58595B">
<meta name="apple-mobile-web-app-status-bar-style" content="#58595B">
<meta http-equiv="X-Frame-Options" content="SAMEORIGIN">
<!--[if IE]><![endif]-->
<!--[if lte IE 8]>
		<link rel="stylesheet" href="/assets/css/old-ie.css"/>
		<![endif]-->
<!--[if IE 9]>
              <link rel="stylesheet" type="text/css" href="/assets/css/ie-9.css">
        <![endif]-->
<!--[if gt IE 9]><!-->
<link rel="stylesheet" href="https://onsdigital.github.io/ons-pattern-library-starter/sixteens/css/old-ie.css">
<link rel="stylesheet" href="https://onsdigital.github.io/ons-pattern-library-starter/sixteens/css/ie-9.css">
<link rel="stylesheet" href="https://onsdigital.github.io/ons-pattern-library-starter/sixteens/css/main.css">
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.12.0/jquery.min.js"></script>
<script src="resources/javascript/2json.js" type="text/javascript"></script>
</head>
<body>
<!--[if gt IE 8]><!-->

<header>
<a class="skiplink" href="#main" tabindex="0">
Skip to main content
</a>
<div id="pagePath" class="hide">/search</div>
<div class="beta-banner">
<div class="wrapper">
<p>We have launched our new website. Read more in this <a href=http://blog.ons.digital/2016/02/25/new-ons-website-launched/>blog post</a></p>
</div>
</div>
<div class="wrapper">
<div class="header col-wrap">
<div class="col col--lg-one-third col--md-one-third">
<a href="/">
<img class="main-logo" src="resources/images/ons-logo.png" alt="Office for National Statistics">
</a>
</div>
<div class="col col--lg-two-thirds col--md-two-thirds hide--mobile print--hide language--js__container">
<dl class="language js-enhance--hide">
<dt class="language__title">Language:</dt>
<dd class="language__item">
<a href="//cy.ons.gov.uk/search?q=
" class="language__link icon--hide">Cymraeg (CY)</a>
</dd>
</dl>
<form class="language language--js js-enhance--show">
<label class="language--js__label" for="lang">Language:</label>
<select class="language--js__select" id="lang" name="lang">
<option value="english" data-url="//www.www.ons.gov.uk/search?q=" selected="selected">English (EN)</option>
<option value="welsh" data-url="//cy.ons.gov.uk/search?q=">Cymraeg (CY)</option>
</select>
</form>
</div>
<div class="secondary-nav col col--lg-two-thirds col--md-two-thirds print--hide">
<ul class="secondary-nav__list js-nav-clone__list">
<li class="secondary-nav__item">
<a class="secondary-nav__link  js-nav-clone__link" href="/releasecalendar">Release calendar</a>
</li>
<li class="secondary-nav__item">
<a class="secondary-nav__link  js-nav-clone__link" href="/methodology">Methodology</a>
</li>
<li class="secondary-nav__item">
<a class="secondary-nav__link  js-nav-clone__link" href="/news">Media</a>
</li>
<li class="secondary-nav__item">
<a class="secondary-nav__link  js-nav-clone__link" href="/aboutus">About</a>
</li>
</ul>
</div>
</div>
</div>
<div class="primary-nav print--hide">
<nav>
<ul class="nav--controls">
<li class="nav--controls__item">
<a href="#nav-primary" id="menu-toggle" aria-controls="nav-primary" class="nav--controls__menu">
<span class="nav--controls__text">Menu</span>
</a>
</li>
<li class="nav--controls__item search-is-expanded">
<a href="#nav-search" id="search-toggle" aria-controls="nav-search" class="nav--controls__search">
<span class="nav--controls__text">Search</span>
</a>
</li>
</ul>
<div class="wrapper nav-main--hidden" id="nav-primary">
</div>
<script>
// used in url param validation
var invalidCnt = 0;  
var searchtext;

validateUrl();

// valid url - continue
if (invalidCnt === 0){
	searchtext =  getUrlParams()["q"];
  
}  
else {
	alert("invalid");
}
function getUrlParams() {
    var vars = {};
    parts = decodeURI(window.location.href).replace(/[?&]+([^=&]+)=([^&]*)/gi, function(m,key,value) {
    vars[key] = value;
    });
    return vars;
}

function validateUrl() {
    var vars = {};	       
    parts = decodeURI(window.location.href).replace(/[?&]+([^=&]+)=([^&]*)/gi, function(m,key,value) {
        vars[key] = value;
    	if (!checkURL(key,value)){
    		invalidCnt = invalidCnt + 1;
    	}	    
    });
   
    return vars;
}

function checkURL(key,value) {
	var urlregex               = /^[a-zA-ZÃ¢0-9-\''\s\\&\\'\\:\\/\\(\\)\\!\\,\\+\\.\\%]+$/;
	
	// checking if a string is blank, null or undefined  
	if((/^\s*$/).test(key) || (/^\s*$/).test(value) ) {return (true);} 
	else{
    	if(urlregex.test(key) == false || urlregex.test(value) == false)
    	{
    		return (false);	
    	}
    	else {
    		return (true);
    	}		    	
	}	
} 
 
function getMetadata(id, dataset, subject){	
	var url = "";
   $.ajax({
		type	: "POST",
		url		: "http://neighbourhood.statistics.gov.uk/NDE2/Disco/GetDatasetDetail?DSFamilyId="+ id,
		dataType: "text",
		data	: {"url" : url},
		success : function(data)
		{
		  if(data != "")
		  {
			  x2js = new X2JS();
			  json = x2js.xml_str2json(data);			 
			  var obj = json.GetDatasetDetailResponseElement.DatasetDetail;
			  var optionalMetaData = obj.OptionalMetaData;			  
			  $('#results').append('<p style="font-size: 1.3em;">' + subject + '</p>');
			  $('#results').append('<a style="font-size: 1.3em;" href="datasetDetail.html?dsFamilyId=' + id + '">' + dataset + '</a><br><p class="search-results__meta"> Dataset Released on 31 July 2013</p><div class="search-results__summary">' 
			  	 + optionalMetaData + '</div><br>'); 
			  return optionalMetaData;
		  }	  
		}  
	 });      
 }

	var url = "";
    var dataset, dsFamilyId, metadataText, obj, subject;
 	var matchingCount  = 0;
	var dsRelFamcnt    = 0;
	var dsMatFamcnt    = 0;
		    
 $.ajax({
	type	: "POST",
	url		: "http://neighbourhood.statistics.gov.uk/NDE2/Disco/FindDatasets?Metadata=" + searchtext,
	dataType: "text",
	data	: {"url" : url},
	success : function(data)
	{
	  if(data != "")
      {
		  x2js = new X2JS();
		  json = x2js.xml_str2json(data);
			  
		  var SubjectMatchingDSFcnt = JSON.stringify(json.FindDatasetsResponseElement.SubjectsWithMatchingDSFamilies.SubjectWithMatchingDSFamilies.length);	      
			  
		  for(var i=0;i<SubjectMatchingDSFcnt;i++){
					    
		    obj = json.FindDatasetsResponseElement.SubjectsWithMatchingDSFamilies.SubjectWithMatchingDSFamilies[i];
		    subject = obj.Subject.Name; 		   		    
					    
		    if(obj.RelatedDSFamilies != "")
		    {			    	
		    	if (obj.RelatedDSFamilies.DSFamily instanceof Array) {
	    	    // data is an array
				    	     
        		  dsRelFamcnt   = JSON.stringify(obj.RelatedDSFamilies.DSFamily.length) ;
	    		  for(var j=0;j<dsRelFamcnt;j++){
	   			     matchingCount = parseInt( matchingCount) + 1;
		        	 dataset = obj.RelatedDSFamilies.DSFamily[j].Name;
							        	 
		        	 // get metadata
			         dsFamilyId = obj.RelatedDSFamilies.DSFamily[j].DSFamilyId; 
		        	 getMetadata(dsFamilyId, dataset,subject); 			     	 
			       }
				} else {
					   	    // it is not an array
					  matchingCount = parseInt(matchingCount) + 1;
					  dataset = obj.RelatedDSFamilies.DSFamily.Name;
					   	    
					   // get metadata
					   dsFamilyId = obj.RelatedDSFamilies.DSFamily.DSFamilyId;
					   getMetadata(dsFamilyId, dataset,subject); 
					}
				 }
				 if(obj.MatchingDSFamilies != "")
				 {
				   	if (obj.MatchingDSFamilies.DSFamily instanceof Array) {
				  	 // data is an array
				     dsMatFamcnt = JSON.stringify(obj.MatchingDSFamilies.DSFamily.length);
					 for(var k=0;k<dsMatFamcnt;k++){
					   	 matchingCount = parseInt(matchingCount) + 1;
					   	 dataset = obj.MatchingDSFamilies.DSFamily[k].Name;
						        	 
					   	 // get metadata
					   	 dsFamilyId = obj.MatchingDSFamilies.DSFamily[k].DSFamilyId					   	 
					   	 getMetadata(dsFamilyId,dataset,subject);				  
					  }	
				   	} else{
					   	 // it is not an array
					   	 matchingCount = parseInt(matchingCount) + 1;
					   	 dsMatFamcnt = JSON.stringify(obj.MatchingDSFamilies.DSFamily.length);
					     dataset = obj.MatchingDSFamilies.DSFamily;
					    	     
					     // get metadata
					     dsFamilyId = obj.MatchingDSFamilies.DSFamily.DSFamilyId;					    
					     getMetadata(dsFamilyId,dataset,subject); 
				    }     
				 }
			  }
		  }	
			  $('#searchText').append('<br><span style="font-size: 1.5em;" class="stand-out-text"><strong>Search results for ' +  "'" + searchtext +  "'" + '</strong></span><br>');
	   }			
  }); 

</script>			
<div class="background--abbey height--8">
 <div class="wrapper">
</div>
</div>
<div class="background--ship-gray padding-top-sm--2">
<div class="wrapper">
<nav class="tabs--js">
<ul class="list--neutral flush">
</ul>
</nav>
</div>
</div>
</header>
<main id="main" role="main" tabindex="-1">
<div class="page-content border">
<div class="wrapper">
<div class="col-wrap print-hidden">
<div class="col">
<div id="searchText"></div>
</div>
</div>
<input class="sort__input" type="hidden" name="q" value="">
<div class="col-wrap">
<div class="col col--md-34 col--lg-40 margin-left-md--1">
<div class="float-right">
<div class="sort-results">
<form id="form-sort" class="js-auto-submit__form">
<input type="hidden" name="q" value="">
<div class="js-mobile-filters__sort">
<label for="select" class="sort__label">Sort by
<select class="input select select--thin width-auto js-auto-submit__input" id="select" name="sortBy">
<option class="sort__option" value="relevance" selected>Relevance</option>
<option class="sort__option" value="release_date">Release date</option>
<option class="sort__option" value="title">Title</option>
</select>
</label>
</div>
</form>
</div>
</div>
 <div id="results" class="results"></div>
<div class="col-wrap border-bottom--iron-md"></div>
<div class="js-show-hide">
   
        <div class="js-show-hide__content">
            <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. In egestas pharetra nunc in aliquam. Duis malesuada euismod libero at ultricies. Morbi elementum sodales magna, quis fermentum est lobortis ut. Nulla eu pellentesque purus, et molestie dolor. Nulla ex augue, tincidunt in molestie sodales, pharetra et nisi. Interdum et malesuada fames ac ante ipsum primis in faucibus. In faucibus consectetur nulla, auctor facilisis libero rutrum non.</p>
        </div>   
</div>
<div class="js-show-hide">
    <div class="show-hide show-hide--light">
        <div class="js-show-hide__title">
            <h2 class="show-hide__title">
                Lorem Ipsum
            </h2>
        </div>
        <div class="js-show-hide__content">
            <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. In egestas pharetra nunc in aliquam. Duis malesuada euismod libero at ultricies. Morbi elementum sodales magna, quis fermentum est lobortis ut. Nulla eu pellentesque purus, et molestie dolor. Nulla ex augue, tincidunt in molestie sodales, pharetra et nisi. Interdum et malesuada fames ac ante ipsum primis in faucibus. In faucibus consectetur nulla, auctor facilisis libero rutrum non.</p>
        </div>
    </div>
</div>
</div>
</div>
</div>
</div>
</main>
<footer class="print--hide">
<h2 class="visuallyhidden">Footer links</h2>
<div class="footer">
<div class="wrapper">
<nav class="footer-nav col-wrap">
<div class="col col--lg-one-third col--md-one-third">
<h3 class="footer-nav__heading">Help</h3>
<ul class="footer-nav__list">
<li class="footer-nav__item">
<a href="/help/accessibility">Accessibility</a>
</li>
<li class="footer-nav__item">
<a href="/help/cookiesandprivacy">Cookies and privacy</a>
</li>
<li class="footer-nav__item">
<a href="/help/termsandconditions">Terms and conditions</a>
</li>
</ul>
</div>
<div class="col col--lg-one-third col--md-one-third">
<h3 class="footer-nav__heading">About ONS</h3>
<ul class="footer-nav__list">
<li class="footer-nav__item">
<a href="/aboutus/whatwedo">What we do</a>
</li>
<li class="footer-nav__item">
<a href="/aboutus/careers">Careers</a>
</li>
<li class="footer-nav__item">
<a href="/aboutus/contactus">Contact us</a>
</li>
<li class="footer-nav__item">
<a href="/news">News</a>
</li>
<li class="footer-nav__item">
<a href="/aboutus/transparencyandgovernance/freedomofinformationfoi">Freedom of Information</a>
</li>
</ul>
</div>
<div class="col col--lg-one-third col--md-one-third">
<h3 class="footer-nav__heading">Connect with us</h3>
<ul class="footer-nav__list">
<li class="footer-nav__item">
<a href="https://twitter.com/ONS" class="icon--hide">Twitter</a>
</li>
<li class="footer-nav__item">
<a href="https://www.facebook.com/ONS" class="icon--hide">Facebook</a>
</li>
<li class="footer-nav__item">
<a href="https://www.linkedin.com/company/office-for-national-statistics" class="icon--hide">LinkedIn</a>
</li>
<li class="footer-nav__item">
<a href="https://public.govdelivery.com/accounts/UKONS/subscribers/new" class="icon--hide">Email alerts</a>
</li>
</ul>
</div>
</nav>
</div>
<div class="wrapper">
<div class="footer-license">
<img class="footer-license__img" alt="OGL" width="60" src="/img/ogl.png">
<p class="footer-license__text margin-left-sm--0">
All content is available under the <a class="icon--hide" href="http://www.nationalarchives.gov.uk/doc/open-government-licence/version/3/">Open Government Licence v3.0</a> <span class="icon icon-external--light-small"></span>, except where otherwise stated
</p>
</div>
</div>
</div>
</footer>
<!--[if gt IE 8]><!--><a id="bugherd-feedback" href="mailto:project-cwz4globzxvnj84jsovora@bugs.bugherd.com?subject=Feedback - www.ons.gov.uk/search&body=Page Title:
    
    
    
    
    
    
    
    
    
     - Search
    
    
    
    
    
%0D%0APage URI:www.ons.gov.uk/search%0D%0A%0D%0AYour feedback:%0D%0A" tabindex="0" class="mini print--hide">Send Feedback</a><![endif]-->
<script type="text/javascript">
var loop11_key = "0104054b3b56d396b42e668dfe096cee161454a8";
document.write(unescape("%3cscript src='//cdn.loop11.com/my/loop11.js' type='text/javascript'%3e%3c/script%3e"));
</script>
<!--[if gt IE 8]><!-->

<script src="resources/javascript/babbage.js" type="text/javascript"></script>
<![endif]-->
</body>
</html>